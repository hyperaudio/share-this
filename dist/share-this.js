!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ShareThis=t()}(this,function(){"use strict";function e(e){var t=e.document.body,n="static"===e.getComputedStyle(t).position?t.parentNode:t;return n.getBoundingClientRect()}function t(e,t){return m||(m=r(e)),e[m](t)}function n(e,n){for(var o=e;o&&(1!==o.nodeType||!t(o,n));)o=o.parentNode;return o}function o(e,t){var n=e.compareDocumentPosition(t);return!n||(16&n)>0}function r(e){for(var t="atchesSelector",n=["matches","m"+t,"webkitM"+t,"mozM"+t,"msM"+t,"oM"+t],o=0;o<n.length;o++){var r=n[o];if(e[r])return r}}function i(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(o.name===t)return o}}function a(e,t){if(t&&"object"===("undefined"==typeof t?"undefined":g(t)))for(var n in t)e[n]=t[n];return e}function c(e){return"function"==typeof e}function u(e){return e.startsWith("#")?document.getElementById(e.substring(1,e.length)):null}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e){if(e.isCollapsed)return!0;var t=e.anchorNode.compareDocumentPosition(e.focusNode);return t?(4&t)>0:e.anchorOffset<e.focusOffset}function s(e,t){var n=void 0,o=e.getClientRects(),r=[].slice.bind(o);if(t){for(var i=1/0,a=o.length;a--;){var c=o[a];if(c.left>i)break;i=c.left}n=r(a+1)}else{for(var u=-(1/0),l=0;l<o.length;l++){var s=o[l];if(s.right<u)break;u=s.right}n=r(0,l)}return{top:Math.min.apply(Math,f(n.map(function(e){return e.top}))),bottom:Math.max.apply(Math,f(n.map(function(e){return e.bottom}))),left:n[0].left,right:n[n.length-1].right}}function p(e,t){var r=e.cloneRange();if(e.collapsed||!t)return r;var i=n(e.startContainer,t);return i?o(i,e.endContainer)||r.setEnd(i,i.childNodes.length):(i=n(e.endContainer,t),i?r.setStart(i,0):r.collapse()),r}function d(t,n,o){var r=o.document,i=r.defaultView,a=i.getSelection(),c=l(a),f=s(n,c),p=e(i),d=u(o.selector),v=t.style;if(c){var h=f.right+p.left;v.right=r.documentElement.clientWidth-h+"px"}else v.left=f.left-p.left+"px";v.width=f.right-f.left+"px",v.height=f.bottom-f.top+"px",v.top=f.top-p.top+"px";var m=f.top-p.top;if(d){var g=d.scrollTop-d.getBoundingClientRect().top;g+=p.top,v.top=m+g+"px"}else v.top=m+"px";v.position="absolute",t.className=o.popoverClass}function v(e,t){var o=n(t.target,"["+y+"]");if(o){var r=o.getAttribute(y),a=i(e,r);a&&c(a.action)&&a.action(t,o)}}function h(e,t){return{createPopover:function(){var t=e.createElement("div");return t.addEventListener("click",function(e){v(this.sharers,e)}),t},attachPopover:function(n){var o=u(t.selector);o?o.appendChild(n):e.body.appendChild(n)},removePopover:function(e){var t=e.parentNode;t&&t.removeChild(e)}}}var m=void 0,g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y="data-share-via",b=function(e,t,n,o){var r=e.shareUrl||e.document.defaultView.location;return"<ul>"+t.map(function(e){return'<li data-share-via="'+e.name+'">'+e.render.call(e,n,o,r)+"</li>"}).join("")+"</ul>"},C=void 0,S=["selectionchange","mouseup","touchend","touchcancel"],E=function(e){function t(e){g.addEventListener(e,r)}function n(e){g.removeEventListener(e,r)}function o(){E&&d(E,i(),s)}function r(e){var t=e.type,n="selectionchange"===t;!E!==n&&setTimeout(function(){var e=i();e?u(e):f()},10)}function i(){var e=y.getSelection(),t=e.rangeCount&&e.getRangeAt(0);if(t){var n=p(t,s.selector);if(!n.collapsed&&n.getClientRects().length)return n}}function u(e){var t=!E,n=e.toString(),o=s.transformer(n),r=s.sharers.filter(l.bind(null,o,n));return r.length?(t&&(E=x.createPopover()),E.sharers=r,E.innerHTML=b(s,r,o,n),d(E,e,s),void(t&&(x.attachPopover(E),c(s.onOpen)&&s.onOpen(E,o,n)))):void(E&&f())}function f(){E&&(x.removePopover(E),E=C,c(s.onClose)&&s.onClose())}function l(e,t,n){var o=n.active;return c(o)?o(e,t):o===C||o}var s=(Object.assign||a)({document:document,selector:"body",sharers:[],popoverClass:"share-this-popover",transformer:function(e){return e.trim().replace(/\s+/g," ")}},e||{}),v=!1,m=!1,g=C,y=C,E=C,x=C;return{init:function(){return!v&&(g=s.document,y=g.defaultView,y.getSelection?(S.forEach(t),y.addEventListener("resize",o),x=h(g,s),v=!0):(console.warn("share-this: Selection API isn't supported"),!1))},destroy:function(){return!(!v||m)&&(S.forEach(n),y.removeEventListener("resize",o),f(),g=C,y=C,m=!0)}}};return E});
//# sourceMappingURL=share-this.js.map
